import {
  virtualLocationResolver
} from "./chunk-3XHIIJD4.js";
import {
  organizationResolver,
  personResolver
} from "./chunk-CD5O3SWS.js";
import "./chunk-3DTVR3OD.js";
import "./chunk-UB4YNOCX.js";
import "./chunk-YKYDJGGC.js";
import {
  placeResolver
} from "./chunk-DDV23LRR.js";
import "./chunk-NE6DWWPC.js";
import {
  offerResolver
} from "./chunk-D4HW3F7C.js";
import "./chunk-F22XZUEQ.js";
import {
  IdentityId,
  defineSchemaOrgResolver,
  idReference,
  resolvableDateToDate,
  resolvableDateToIso,
  resolveRelation,
  setIfEmpty
} from "./chunk-2KIJOMNU.js";

// node_modules/@unhead/schema-org/dist/chunks/index10.mjs
import { withBase } from "ufo";
import "unhead/plugins";
import "unhead/utils";
var PrimaryEventId = "#event";
var eventResolver = defineSchemaOrgResolver({
  defaults: {
    "@type": "Event"
  },
  inheritMeta: [
    "inLanguage",
    "description",
    "image",
    { meta: "title", key: "name" }
  ],
  idPrefix: ["url", PrimaryEventId],
  resolve(node, ctx) {
    if (node.location) {
      const isVirtual = node.location === "string" || node.location?.url !== "undefined";
      node.location = resolveRelation(node.location, ctx, isVirtual ? virtualLocationResolver : placeResolver);
    }
    node.performer = resolveRelation(node.performer, ctx, personResolver, {
      root: true
    });
    node.organizer = resolveRelation(node.organizer, ctx, organizationResolver, {
      root: true
    });
    node.offers = resolveRelation(node.offers, ctx, offerResolver);
    if (node.eventAttendanceMode)
      node.eventAttendanceMode = withBase(node.eventAttendanceMode, "https://schema.org/");
    if (node.eventStatus)
      node.eventStatus = withBase(node.eventStatus, "https://schema.org/");
    const isOnline = node.eventStatus === "https://schema.org/EventMovedOnline";
    const dates = ["startDate", "previousStartDate", "endDate"];
    dates.forEach((date) => {
      if (!isOnline) {
        if (node[date] instanceof Date && node[date].getHours() === 0 && node[date].getMinutes() === 0)
          node[date] = resolvableDateToDate(node[date]);
      } else {
        node[date] = resolvableDateToIso(node[date]);
      }
    });
    setIfEmpty(node, "endDate", node.startDate);
    return node;
  },
  resolveRootNode(node, { find }) {
    const identity = find(IdentityId);
    if (identity)
      setIfEmpty(node, "organizer", idReference(identity));
  }
});
export {
  PrimaryEventId,
  eventResolver,
  placeResolver,
  virtualLocationResolver
};
//# sourceMappingURL=index10-QS3VNIYS.js.map
